<!DOCTYPE html>
<html lang="en">
<head>
    <title>JavaScript面向对象编程 &#8211; 叫我大王</title>
    
    <meta name="description" content="来自五四青年节的问候——少年，唯有学习与爱不可辜负！"/>
    
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="/resources/css/main.css"/>
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
    

    
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    
</head>
<body style="background: url('/resources/images/main_front.jpg') no-repeat fixed;
                            background-size: cover">
<div id="wrapper">
    <header>
    <nav id="main-nav">
        <ul>
            <li style="float: left;"><a class="fancy-nav" style="font-weight: bolder;" href="#">Learn and live!</a></li>
            <li><a class="fancy-nav" href="/index.html">home</a></li>
            
            <li><a class="fancy-nav" href="/categories/example">example</a></li>
            
            <li><a class="fancy-nav" href="/categories/技术文档">技术文档</a></li>
            
            <li><a class="fancy-nav" href="/categories/学习笔记">学习笔记</a></li>
            
            <li><a class="fancy-nav" href="/pages/about.html">about</a></li>
        </ul>
    </nav>
</header>

    <main id="start">
        <div class="articles">
            <article>
    <header>
        
        <h1>JavaScript面向对象编程</h1>  <div class="post-meta">
    <small>
        <time datetime="04 05 2017">
            04 May, 2017
        </time>
        <span class="tag-sep"> | </span>
        
        <a class="comment_count" href="/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/JavaScript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B#disqus_thread"
           data-disqus-identifier="/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/JavaScript面向对象编程"></a>
        <span class="tag-sep"> | </span>
        
        <nav class="tags">
    <ul>
        
        <li><a href="/tags/javascript.html">JavaScript</a><span>&nbsp;&nbsp;</span></li>
        
    </ul>
</nav>

    </small>
</div>

    </header>
    <h2 id="oop面向对象编程">OOP——面向对象编程</h2>
<p>面向对象（Object-Oriented，OO）的语言有一个标志：它们都有类的概念，通过类可以创建任意多个具有相同属性和方法的对象。ECMAScript中没有类的概念，是通过 原型（prototype）的方式来实现面向对象编程的。<br />
ECMA-262把对象定义为：“无序属性的集合，其属性可以包含基本值、对象或者函数。”严格来讲，这就相当于说对象是一组没有特定顺序的值。对象的每个属性或方法都有一个名字，而每个名字都映射到一个值。正因为这样，我们可以把ECMAScript的对象想象成散列表：无非就是一组键值对，其中值可以是数据或函数。</p>

<h2 id="构造函数">构造函数</h2>
<p>构造函数也是普通的函数，但是在其内部使用了this变量，对构造函数使用new运算符就能生成实例，并且this变量会绑定到实例对象上：</p>
<div class="env-header">JavaScript</div>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="kd">function</span> <span class="nx">lineFamily</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">color</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">=</span><span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="o">=</span><span class="nx">color</span><span class="p">;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">Brown</span><span class="o">=</span><span class="k">new</span> <span class="nx">lineFamily</span><span class="p">(</span><span class="s2">"Brown"</span><span class="p">,</span><span class="s2">"brown"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">Cony</span><span class="o">=</span><span class="k">new</span> <span class="nx">lineFamily</span><span class="p">(</span><span class="s2">"Cony"</span><span class="p">,</span><span class="s2">"white"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Brown</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> <span class="c1">//Brown</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Cony</span><span class="p">.</span><span class="nx">color</span><span class="p">);</span> <span class="c1">//white</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>此时“Brown”和“Cony”这两个“lineFamily”的实例对象，都会自动含有一个constructor属性，指向它们的构造函数，也就是“lineFamily”：</p>
<div class="env-header">JavaScript</div>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Cony</span><span class="p">.</span><span class="nx">constructor</span><span class="o">==</span><span class="nx">lineFamily</span><span class="p">);</span> <span class="c1">//true</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>JavaScript提供了instanceof运算符，用来验证原型对象与实例对象之间的关系：</p>
<div class="env-header">JavaScript</div>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Cony</span> <span class="k">instanceof</span> <span class="nx">lineFamily</span><span class="p">);</span> <span class="c1">//true</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h3 id="构造函数的问题浪费内存">构造函数的问题：浪费内存</h3>
<p>如果为“lineFamily”添加几个不变的属性，就变成了这样：</p>
<div class="env-header">JavaScript</div>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="kd">function</span> <span class="nx">lineFamily</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">color</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">=</span><span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="o">=</span><span class="nx">color</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">company</span><span class="o">=</span><span class="s2">"line"</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">eat</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"什么都吃"</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">};</span>
<span class="c1">//生成实例</span>
<span class="kd">var</span> <span class="nx">Brown</span><span class="o">=</span><span class="k">new</span> <span class="nx">lineFamily</span><span class="p">(</span><span class="s2">"Brown"</span><span class="p">,</span><span class="s2">"brown"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">Cony</span><span class="o">=</span><span class="k">new</span> <span class="nx">lineFamily</span><span class="p">(</span><span class="s2">"Cony"</span><span class="p">,</span><span class="s2">"white"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Brown</span><span class="p">.</span><span class="nx">company</span><span class="p">);</span> <span class="c1">//line</span>
<span class="nx">Cony</span><span class="p">.</span><span class="nx">eat</span><span class="p">();</span> <span class="c1">//什么都吃</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Brown</span><span class="p">.</span><span class="nx">eat</span><span class="o">==</span><span class="nx">Cony</span><span class="p">.</span><span class="nx">eat</span><span class="p">);</span><span class="c1">//false</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>表面上看没什么问题，但实际上，没生成一个实例，company属性和eat()方法都是一样的，每一次生成实例，都是重复的内容，就会多占用内存，这样既不环保，也缺乏效率。</p>
<h3 id="解决办法让不变的属性在内存中只生成一次">解决办法：让不变的属性在内存中只生成一次</h3>
<p>通过把不变的属性和方法直接定义在构造函数的prototype对象上，让不变的属性在内存中只生成一次。</p>
<h4 id="prototype模式">prototype模式</h4>
<p>JavaScript规定，每个构造函数都有一个prototype属性，指向另一个对象，这个对象的所有属性和方法都会被构造函数的实例继承。</p>
<div class="env-header">JavaScript</div>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="kd">function</span> <span class="nx">lineFamily</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">color</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="o">=</span><span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="o">=</span><span class="nx">color</span><span class="p">;</span>
<span class="p">};</span>
<span class="nx">lineFamily</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">company</span><span class="o">=</span><span class="s2">"line"</span><span class="p">;</span>
<span class="nx">lineFamily</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">eat</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"什么都吃"</span><span class="p">);</span>
<span class="p">};</span>
<span class="c1">//生成实例</span>
<span class="kd">var</span> <span class="nx">Brown</span><span class="o">=</span><span class="k">new</span> <span class="nx">lineFamily</span><span class="p">(</span><span class="s2">"Brown"</span><span class="p">,</span><span class="s2">"brown"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">Cony</span><span class="o">=</span><span class="k">new</span> <span class="nx">lineFamily</span><span class="p">(</span><span class="s2">"Cony"</span><span class="p">,</span><span class="s2">"white"</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Brown</span><span class="p">.</span><span class="nx">company</span><span class="p">);</span> <span class="c1">//line</span>
<span class="nx">Cony</span><span class="p">.</span><span class="nx">eat</span><span class="p">();</span> <span class="c1">//什么都吃</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>这时所有lineFamily的实例的company和eat()，其实都是一个内存地址，指向prototype对象，因此就提高了执行效率。</p>
<div class="env-header">JavaScript</div>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Brown</span><span class="p">.</span><span class="nx">eat</span><span class="o">==</span><span class="nx">Cony</span><span class="p">.</span><span class="nx">eat</span><span class="p">);</span><span class="c1">//true</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h4 id="prototype相关方法">prototype相关方法</h4>
<p>1.isPrototypeOf()：判断prototype对象和实例之间的关系，如果实例对象的原型链中具有prototype对象，则返回true；否则返回false：</p>
<div class="env-header">JavaScript</div>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">lineFamily</span><span class="p">.</span><span class="nx">isPrototypeOf</span><span class="p">(</span><span class="nx">Brown</span><span class="p">));</span><span class="c1">//true</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>2.hasOwnProperty()：判断属性是否为本地属性（私有属性），如果是本地属性，则返回true；如果是继承自prototype对象的属性或不具有该属性，则返回false：</p>
<div class="env-header">JavaScript</div>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Brown</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="s2">"name"</span><span class="p">));</span><span class="c1">//true</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">Cony</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="s2">"company"</span><span class="p">));</span><span class="c1">//false</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>3.in运算符：判断实例是否具有某个属性（不论是本地属性还是继承自prototype对象的属性），也可以遍历对象的所有属性：</p>
<div class="env-header">JavaScript</div>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"color"</span> <span class="k">in</span> <span class="nx">Brown</span><span class="p">);</span><span class="c1">//true</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"eat"</span> <span class="k">in</span> <span class="nx">Cony</span><span class="p">);</span><span class="c1">//true</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">prop</span> <span class="k">in</span> <span class="nx">Brown</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Brown["</span><span class="o">+</span><span class="nx">prop</span><span class="o">+</span><span class="s2">"]="</span><span class="o">+</span><span class="nx">Brown</span><span class="p">[</span><span class="nx">prop</span><span class="p">]);</span>
<span class="p">};</span>
<span class="c1">//Brown[name]=Brown</span>
<span class="c1">//Brown[color]=brown</span>
<span class="c1">//Brown[company]=line</span>
<span class="c1">//Brown[eat]=function (){</span>
<span class="c1">//    console.log("什么都吃");</span>
<span class="c1">//}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p><a href="https://screamwitch.github.io">回到拉萨</a></p>

    <footer style="margin-top: 40px;border-top: 1px solid #CFD8DC;">
        <div id="container"></div>
        <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
        <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
        <script>
        var gitment = new Gitment({
            id: 'JavaScript面向对象编程',
            owner: 'screamwitch',
            repo: 'blog',
            oauth: {
                client_id: '16d078f5667d361d9b8a',
                client_secret: 'e04afe5b17277c09f1d6f5bb8017c45a8cd5f490',
            },
        });
        gitment.render('container');
        </script>
         <div id="disqus_thread"></div>
<script>
    /**
     * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    var disqus_developer = 1;
    var disqus_config = function () {
        this.page.url = 'http://localhost:4000/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/JavaScript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B';
        this.page.identifier = '/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/JavaScript面向对象编程';
        this.page.title = "JavaScript面向对象编程";
    };
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//.disqus.com/embed.js';

        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> 
    </footer>
</article>

        </div>

    </main>
        <nav class="paginator">
    <ul>
        
        
        <li><a class="fancy-nav" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E5%88%9D%E8%AF%86angularJS">&lt;&nbsp;Prev</a></li>
        
        <li class="sep">&nbsp;</li>
        <li><a class="fancy-nav" href="#">Top</a></li>
        <li class="sep">&nbsp;</li>
        
        <li><a class="fancy-nav" href="/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/webpack%E4%B8%AD%E4%BD%BF%E7%94%A8ECharts">Next&nbsp;&gt;</a></li>
        
        
    </ul>
</nav>

    <footer>
        
<blockquote id="footer-quote">
    <p>
        
        读不在三更五鼓，功只怕一曝十寒！
        
    </p>
    <footer>
        <cite>
        
        - 
        
    </cite>
    </footer>
</blockquote>

<div id="footer-main">
    <small>
        &copy; 2016 Cony. ALL RIGHTS RESERVED.
    </small>
</div>

    </footer>
</div>

</body>
</html>
